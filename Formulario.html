<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convocatoria de Incorporación</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f7f7f7;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
        }

        .container {
            background-color: white;
            padding: 20px;
            margin-top: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
        }

        h1 {
            color: #1a73e8;
            font-size: 24px;
            text-align: center;
        }

        .intro {
            font-size: 14px;
            color: #555;
            margin-bottom: 20px;
        }

        form label {
            display: block; 
            font-weight: bold;
            margin-top: 10px;
        }

        form input,
        form select {
            display: block; 
            width: 100%; 
            padding: 10px;
            margin-top: 5px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

       
        .step button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #1a73e8;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .step button:hover {
            background-color: #155bb5;
        }

        .hidden {
            display: none; 
        }


    </style>
</head>
<body>
    <div class="container">
        <h1>Convocatoria de incorporación de Figuras Educativas, aspirantes a Educador Comunitario (EC)</h1>
        <p class="intro">
            El proceso de captación de aspirantes a Educador Comunitario es un trámite gratuito.
        </p>

        <p class="intro">
            Para dicho trámite en CONAFE llevaremos a cabo una preselección con base en los criterios establecidos en el perfil de ingreso y, en caso de que seas seleccionado, nos comunicaremos contigo en el correo electrónico que vas a registrar, durante los 10 días hábiles próximos para formalizar tu incorporación como Figura Educativa.
        </p>

        <form id="formulario" action="http://127.0.0.1:5000/registrar" method="POST">
            <div class="step" id="step-1">
                <label for="email">Correo Electrónico *</label>
                <input type="email" id="email" name="email" required placeholder="Ingrese su correo electrónico">
                <button type="button" id="next-step">Siguiente</button>
            </div>

            <!-- Paso 2: Datos Generales -->
            <div class="step hidden" id="step-2">
                <h2>Datos Generales</h2>
                <p>Debes completar información básica y datos necesarios para ser identificado y contactado.</p>

                <label for="curp">CURP: *</label>
                <input type="text" id="curp" name="curp" required maxlength="18" placeholder="Inserta CURP">

                <label for="nombre">Nombre(s): *</label>
                <input type="text" id="nombre" name="nombre" required placeholder="Ingrese su(s) nombre(s)">

                <label for="apellido1">Primer apellido: *</label>
                <input type="text" id="apellido1" name="apellido1" required placeholder="Ingrese su primer apellido">

                <label for="apellido2">Segundo apellido: *</label>
                <input type="text" id="apellido2" name="apellido2" required placeholder="Ingrese su segundo apellido">

                <label for="fecha_nacimiento">Fecha de nacimiento: *</label>
                <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" required>

                <label for="genero">Género: *</label>
                <select id="genero" name="genero" required>
                    <option value="">Seleccione su género</option>
                    <option value="femenino">Femenino</option>
                    <option value="masculino">Masculino</option>
                </select>

                <label for="nacionalidad">Nacionalidad: *</label>
                <select id="nacionalidad" name="nacionalidad" required>
                    <option value="">Seleccione su nacionalidad</option>
                    <option value="mexicana">Mexicana</option>
                    <option value="otra">Otra</option>
                </select>

                <h3>Tallas y Medidas</h3>
                <p style="font-size: 14px; color: #555; margin-bottom: 10px;">
                    Las siguientes preguntas de tallas se utilizan para proporcionarte la vestimenta adecuada para tus actividades con CONAFE.
                </p>

                <label for="playera">Talla de playera: *</label>
                <select id="playera" name="playera" required>
                    <option value="chica">Chica</option>
                    <option value="mediana">Mediana</option>
                    <option value="grande">Grande</option>
                </select>

                <label for="pantalon">Talla de pantalón: *</label>
                <select id="pantalon" name="pantalon" required>
                    <option value="chica">Chica</option>
                    <option value="mediana">Mediana</option>
                    <option value="grande">Grande</option>
                </select>

                <label for="peso">Peso (kg): *</label>
                <input type="number" id="peso" name="peso" required placeholder="Ejemplo: 52.30">

                <label for="estatura">Estatura (m): *</label>
                <input type="number" step="0.01" id="estatura" name="estatura" required placeholder="Ejemplo: 1.73">
                <label for="edad">Edad: *</label>
                <input type="number" id="edad" name="edad" required placeholder="edad 18 a 35">
                <h3>Datos Bancarios</h3>
                <label for="banco">Banco: *</label>
                <select id="banco" name="banco" required>
                <option value="">Seleccione su banco</option>
                <option value="banamex">Banamex</option>
                <option value="bancomext">Bancomext</option>
                <option value="banobras">Banobras</option>
                <option value="bbva">BBVA Bancomer</option>
                <option value="santander">Santander</option>
                <option value="banco_bienestar">Banco Bienestar</option>
                <option value="banjercito">Banjercito</option>
                <option value="hsbc">HSBC</option>
                <option value="bajio">Bajío</option>
                <option value="ixe">IXE</option>
                <option value="inbursa">Inbursa</option>
                <option value="interacciones">Interacciones</option>
                <option value="mifel">Mifel</option>
                <option value="scotiabank">Scotiabank</option>
                <option value="banregio">Banregio</option>
                <option value="invex">Invex</option>
                <option value="bansi">Bansi</option>
                <option value="afirme">Afirme</option>
                <option value="banorte">Banorte</option>
                <option value="the_royal_bank">The Royal Bank</option>
                <option value="american_express">American Express</option>
                <option value="bamsa">Bamsa</option>
                <option value="tokyo">Tokyo</option>
                <option value="jp_morgan">JP Morgan</option>
                <option value="bmonex">Bmonex</option>
                <option value="ve_por_mas">Ve Por Más</option>
                <option value="ing">ING</option>
                <option value="deutsche">Deutsche</option>
                <option value="credit_suisse">Credit Suisse</option>
                <option value="azteca">Azteca</option>
                <option value="autofin">Autofin</option>
                <option value="barclays">Barclays</option>
                <option value="compartamos">Compartamos</option>
                <option value="banco_famsa">Banco Famsa</option>
                <option value="bmultiva">Bmultiva</option>
                <option value="actinver">Actinver</option>
                <option value="walmart">Wal-Mart</option>
                <option value="nafin">Nafin</option>
                <option value="interbanco">Interbanco</option>
                <option value="bancoppel">Bancoppel</option>
                <option value="abc_capital">ABC Capital</option>
                <option value="ubs_bank">UBS Bank</option>
                <option value="consu_banco">ConsuBanco</option>
                <option value="volkswagen">Volkswagen</option>
                <option value="cibanco">CIBanco</option>
                <option value="bbase">Bbase</option>
                <option value="bansefi">BANSEFI</option>
                <option value="hipotecaria_federal">Hipotecaria Federal</option>
                <option value="monexcb">MonexCB</option>
                <option value="gbm">GBM</option>
                <option value="masari">Masari</option>
                <option value="value">Value</option>
                <option value="estructuradores">Estructuradores</option>
                <option value="tiber">Tiber</option>
                <option value="vector">Vector</option>
                <option value="b_and_b">B&B</option>
                <option value="accival">Accival</option>
                <option value="merrill_lynch">Merrill Lynch</option>
                <option value="finamex">Finamex</option>
                <option value="valmex">Valmex</option>
                <option value="unica">Unica</option>
                <option value="mapfre">Mapfre</option>
                <option value="profuturo">Profuturo</option>
                <option value="cb_actinver">CB Actinver</option>
                <option value="oactin">OACTIN</option>
                <option value="skandia">Skandia</option>
                <option value="cb_deutsche">CB Deutsche</option>
                <option value="zurich">Zurich</option>
                <option value="zurichvi_vida">ZurichVI Vida</option>
                <option value="su_casita">Su Casita Hipotecaria</option>
                <option value="cb_intercam">CB Intercam</option>
                <option value="ci_bolsa">CI Bolsa</option>
                <option value="bulltick_cb">Bulltick CB</option>
                <option value="sterling">Sterling</option>
                <option value="fincomun">Fincomun</option>
                <option value="hdi_seguros">HDI Seguros</option>
                <option value="order">Order</option>
                <option value="akala">Akala</option>
                <option value="cb_jpmorgan">CB JP Morgan</option>
                <option value="reforma">Reforma</option>
                <option value="stp">STP Sistema de Transferencias y Pagos</option>
                <option value="telecomm">Telecomm</option>
                <option value="evercore">Evercore</option>
                <option value="skandia_fondos">Skandia Operadora de Fondos</option>
                <option value="segmty">Segmty</option>
                <option value="asea">ASEA Solución</option>
                <option value="kuspit">Kuspit</option>
                <option value="sofiexpress">Sofiexpress</option>
                <option value="unagra">Unagra</option>
                <option value="opciones_empresariales">Opciones Empresariales del Noroeste</option>
                <option value="cls">CLS</option>
                <option value="indeval">Indeval</option>
                <option value="libertad">Libertad</option>
                </select>
            </select>
            <div id="bbva-section" class="hidden">
                <p style="font-size: 14px; color: #555; margin-bottom: 10px;">
                    Es necesario tener esta información para poder depositar los recursos que pudieras recibir.
                </p>
                <label for="cuenta-bbva">Número de cuenta BBVA: *</label>
                <input type="text" id="cuenta-bbva" name="cuenta-bbva" placeholder="Ingrese su número de cuenta BBVA">
            </div>

            <div id="otro-section" class="hidden">
                <p style="font-size: 14px; color: #555; margin-bottom: 10px;">
                    Es necesario tener esta información para poder depositar los recursos que pudieras recibir.
                </p>
                <label for="cuenta-otro">Número de cuenta: *</label>
                <input type="text" id="cuenta-otro" name="cuenta-otro" placeholder="Ingrese su número de cuenta ">
            </div>
            <h3>Datos de Contacto</h3>
            <!-- Teléfono Fijo -->
            <label for="telefono-fijo">Teléfono fijo:</label>
            <input 
                type="tel" 
                id="telefono-fijo" 
                name="telefono-fijo" 
                maxlength="10" 
                oninput="this.value = this.value.replace(/[^0-9]/g, '')" 
                placeholder="Ingrese su número de teléfono fijo (10 dígitos)">
            
            <!-- Teléfono Móvil -->
            <label for="telefono-movil">Teléfono móvil: *</label>
            <input 
                type="tel" 
                id="telefono-movil" 
                name="telefono-movil" 
                maxlength="10" 
                required 
                oninput="this.value = this.value.replace(/[^0-9]/g, '')" 
                placeholder="Ingrese su número de teléfono móvil (10 dígitos)">
            <label for="NivelEdu">Nivel Educativo: *</label>
            <select id="NivelEdu" name="NivelEdu" required>
                <option value="">Seleccione su Nivel Educatvo</option>
                <option value="EBasica">Educación Basica</option>
                <option value="EMSuperior">Educación Media Superior</option>
                <option value="ESuperior">Educación Superior</option>
            </select>
            <label for="LengIndi">¿Hablas alguna lengua indígena?: *</label>
            <select id="LengIndi" name="LengIndi" required>
                <option value="">Seleccione</option>
                <option value="LSi">Si</option>
                <option value="LNo">No</option>
            </select>
            <h3>Gusto o experiencia en cuanto a divulgación de la ciencia: *</h3>
            <label><input type="checkbox" name="pregunta1[]" value="biologia"> Biología</label>
            <label><input type="checkbox" name="pregunta1[]" value="quimica"> Química</label>
            <label><input type="checkbox" name="pregunta1[]" value="fisica"> Física</label>
            <label><input type="checkbox" name="pregunta1[]" value="otro"> Otro</label>

            <h3>Habilidades o experiencias previas en materia de arte y cultura: *</h3>
            <label><input type="checkbox" name="pregunta2[]" value="musica"> Música</label>
            <label><input type="checkbox" name="pregunta2[]" value="teatro"> Teatro</label>
            <label><input type="checkbox" name="pregunta2[]" value="artes_plasticas"> Artes plásticas</label>
            <label><input type="checkbox" name="pregunta2[]" value="literatura"> Literatura</label>

            <h3>Menciona ¿Cuál es el interés que tienes en el desarrollo comunitario? *</h3>
            <input type="text" id="pregunta3" name="pregunta3" required placeholder="Escribe tu respuesta aquí">

            <h3>¿Cuál es la principal razón por la que quieres ser un Líder para la Educación Comunitaria? *</h3>
            <div class="radio-group">
                <label><input type="radio" name="pregunta4" value="apoyo-economico" required> Recibir el apoyo económico para </br>poder continuar con mis estudios</label>
                <label><input type="radio" name="pregunta4" value="experiencia-lider"> Tener la experiencia de ser un Líder </br>para la Educación Comunitaria </br>y compartir mis conocimientos</label>
                <label><input type="radio" name="pregunta4" value="no-perder-ano"> No perder el año y realizar alguna </br>actividad</label>
                <label><input type="radio" name="pregunta4" value="conocer-personas"> Conocer personas y trabajar </br>con niños</label>
                <label><input type="radio" name="pregunta4" value="apoyar-programas"> Me gusta apoyar y participar </br>en programas sociales</label>
            </div>

            <h3>¿Cuál es la profesión que más te llama la atención? *</h3>
            <input type="text" id="pregunta5" name="pregunta5" required placeholder="Escribe tu respuesta aquí">

            <h3>¿Tu participación en el CONAFE te servirá como requisito de titulación universitaria? *</h3>
            <div class="radio-group">
                <label><input type="radio" name="pregunta6" value="si" required> Sí</label>
                <label><input type="radio" name="pregunta6" value="no"> No</label>
            </div>

            <h3>Te interesa la incorporación al CONAFE para realizar: *</h3>
            <div class="radio-group">
                <label><input type="radio" name="pregunta7" value="practicas" required> Prácticas profesionales</label>
                <label><input type="radio" name="pregunta7" value="servicio"> Servicio social</label>
                <label><input type="radio" name="pregunta7" value="residencia"> Residencia profesional</label>
                <label><input type="radio" name="pregunta7" value="movilidad"> Movilidad académica</label>
                <label><input type="radio" name="pregunta7" value="voluntariado"> Participación voluntaria</label>
            </div>


                <button type="button" id="prev-step">Atrás</button>
                <button type="button" id="next-step-2">Siguiente</button>
            </div>
            <!-- Paso 3: Residencia -->
            <div class="step hidden" id="step-3">
                <h2>Residencia</h2>
                <p>En este apartado se solicita información sobre el lugar donde vives actualmente.</p>

                <label for="codigo-postal">Código postal: *</label>
                <input type="text" id="codigo-postal" name="codigo-postal" required maxlength="5" placeholder="Ejemplo: 12345">

                <label for="estado">Estado: *</label>
                <select id="estado" name="estado" required>
                    <option value="">Seleccione su estado</option>
                    <option value="aguascalientes">Aguascalientes</option>
                    <option value="baja_california">Baja California</option>
                    <option value="baja_california_sur">Baja California Sur</option>
                    <option value="campeche">Campeche</option>
                    <option value="cdmx">Ciudad de México</option>
                    <option value="chihuahua">Chihuahua</option>
                    <option value="chiapas">Chiapas</option>
                    <option value="coahuila">Coahuila</option>
                    <option value="colima">Colima</option>
                    <option value="durango">Durango</option>
                    <option value="guanajuato">Guanajuato</option>
                    <option value="guerrero">Guerrero</option>
                    <option value="hidalgo">Hidalgo</option>
                    <option value="jalisco">Jalisco</option>
                    <option value="edo_mexico">Estado de México</option>
                    <option value="michoacan">Michoacán</option>
                    <option value="morelos">Morelos</option>
                    <option value="nayarit">Nayarit</option>
                    <option value="nuevo_leon">Nuevo León</option>
                    <option value="oaxaca">Oaxaca</option>
                    <option value="puebla">Puebla</option>
                    <option value="queretaro">Querétaro</option>
                    <option value="quintana_roo">Quintana Roo</option>
                    <option value="san_luis_potosi">San Luis Potosí</option>
                    <option value="sinaloa">Sinaloa</option>
                    <option value="sonora">Sonora</option>
                    <option value="tabasco">Tabasco</option>
                    <option value="tamaulipas">Tamaulipas</option>
                    <option value="tlaxcala">Tlaxcala</option>
                    <option value="veracruz">Veracruz</option>
                    <option value="yucatan">Yucatán</option>
                    <option value="zacatecas">Zacatecas</option>
                    <option value="extranjero">Extranjero</option>
                </select>
                

                <label for="municipio">Municipio o Alcaldía: *</label>
                <input type="text" id="municipio" name="municipio" required placeholder="Ingrese su municipio o alcaldía">

                <label for="localidad">Localidad: *</label>
                <input type="text" id="localidad" name="localidad" required placeholder="Ingrese su localidad">

                <label for="colonia">Colonia: *</label>
                <input type="text" id="colonia" name="colonia" required placeholder="Ingrese su colonia">

                <label for="calle">Calle: *</label>
                <input type="text" id="calle" name="calle" required placeholder="Ingrese su calle">

                <label for="numero-exterior">Número exterior: *</label>
                <input type="text" id="numero-exterior" name="numero-exterior" required placeholder="Ingrese su número exterior">

                <label for="numero-interior">Número interior:</label>
                <input type="text" id="numero-interior" name="numero-interior" placeholder="Ingrese su número interior">

                <button type="button" id="prev-step-3">Atrás</button>
                <button type="button" id="next-step-3">Siguiente</button>
            </div>
            <div class="step hidden" id="step-4">
                <h2>Participación</h2>
                <p>Esta sección ayuda a organizar mejor los recursos, las asignaciones y las actividades educativas.</p>

                <!-- Estado de participación -->
                <label for="estado-participacion">Estado en el que deseas participar: *</label>
                <select id="estado-participacion" name="estado-participacion" required>
                    <option value="">Seleccione un estado</option>
                    <option value="aguascalientes">CONAFE Aguascalientes</option>
                    <option value="baja_california">CONAFE Baja California</option>
                    <option value="baja_california_sur">CONAFE Baja California Sur</option>
                    <option value="campeche">CONAFE Campeche</option>
                    <option value="cdmx">CONAFE Ciudad de México</option>
                    <option value="coahuila">CONAFE Coahuila</option>
                    <option value="chiapas">CONAFE Chiapas</option>
                    <option value="chihuahua">CONAFE Chihuahua</option>
                    <option value="colima">CONAFE Colima</option>
                    <option value="durango">CONAFE Durango</option>
                    <option value="guanajuato">CONAFE Guanajuato</option>
                    <option value="guerrero">CONAFE Guerrero</option>
                    <option value="hidalgo">CONAFE Hidalgo</option>
                    <option value="jalisco">CONAFE Jalisco</option>
                    <option value="edo_mexico">CONAFE Estado de México</option>
                    <option value="michoacan">CONAFE Michoacán</option>
                    <option value="morelos">CONAFE Morelos</option>
                    <option value="nayarit">CONAFE Nayarit</option>
                    <option value="nuevo_leon">CONAFE Nuevo León</option>
                    <option value="oaxaca">CONAFE Oaxaca</option>
                    <option value="puebla">CONAFE Puebla</option>
                    <option value="queretaro">CONAFE Querétaro</option>
                    <option value="quintana_roo">CONAFE Quintana Roo</option>
                    <option value="san_luis_potosi">CONAFE San Luis Potosí</option>
                    <option value="sinaloa">CONAFE Sinaloa</option>
                    <option value="sonora">CONAFE Sonora</option>
                    <option value="tabasco">CONAFE Tabasco</option>
                    <option value="tamaulipas">CONAFE Tamaulipas</option>
                    <option value="tlaxcala">CONAFE Tlaxcala</option>
                    <option value="veracruz">CONAFE Veracruz</option>
                    <option value="yucatan">CONAFE Yucatán</option>
                    <option value="zacatecas">CONAFE Zacatecas</option>
                </select>

                <!-- Ciclo escolar -->
                <label for="ciclo-escolar">Ciclo escolar a participar: *</label>
                <select id="ciclo-escolar" name="ciclo-escolar" required>
                    <option value="">Seleccione un ciclo</option>
                    <option value="2024-2025">2024-2025</option>
                    <option value="2025-2026">2025-2026</option>
                    <option value="2026-2027">2026-2027</option>
                </select>

                <!-- Medio de difusión -->
                <label for="medio-difusion">Medio por el cual te enteraste: *</label>
                <select id="medio-difusion" name="medio-difusion" required>
                    <option value="">Seleccione una opción</option>
                    <option value="stand_evento">Stand evento</option>
                    <option value="redes_sociales">Redes sociales</option>
                    <option value="ecuela">Escuela</option>
                    <option value="figura">Figura CONAFE</option>
                    <option value="radio">Radio</option>
                    <option value="television">Televisión</option>
                    <option value="internet">Internet</option>
                    <option value="familiarC">Familiar conocido (no es figura publica)</option>
                    <option value="car/vol">Cartel/Volante</option>
                    <option value="PagOfi">Página oficial de CONAFE</option>
                    <option value="PagOfiE">Página oficial de CONAFE en la entidad</option>
                </select>

                <!-- Municipio -->
                <label for="municipio-participacion">Municipio en el que deseas brindar el servicio educativo: *</label>
                <input type="text" id="municipio-participacion" name="municipio-participacion" required placeholder="Ingrese el municipio">

                <button type="button" id="prev-step-4">Atrás</button>
                <button type="button" id="next-step-4">Siguiente</button>
            </div>
            <div class="step hidden" id="step-5">
                <h2>Carga de Documentos</h2>
                <p>Se solicita subir documentos importantes para completar tu postulación.</p>

                <!-- Documento 1 -->
                <!-- Certificado -->
            <label for="certificado">Anexa el archivo PDF de tu certificado o constancia de último grado de estudios. *</label>
            <p style="font-size: 12px; color: #555;">
                Sube 1 archivo compatible: PDF, document, image, presentation o spreadsheet. El tamaño máximo es de 10 MB.
            </p>
            <input type="file" id="certificado" name="certificado" required accept=".pdf,.doc,.docx,.jpg,.jpeg,.png,.ppt,.xls,.xlsx">

            <!-- Identificación -->
            <label for="identificacion">Anexa el archivo PDF de tu identificación oficial. *</label>
            <p style="font-size: 12px; color: #555;">
                Sube 1 archivo compatible: PDF, document, drawing o image. El tamaño máximo es de 10 MB.
            </p>
            <input type="file" id="identificacion" name="identificacion" required accept=".pdf,.doc,.docx,.jpg,.jpeg,.png">

            <!-- Estado de cuenta -->
            <label for="estado-cuenta">Anexa el archivo PDF de la carátula de estado de cuenta bancaria que incluya nombre y domicilio del aspirante. *</label>
            <p style="font-size: 12px; color: #555;">
                Sube 1 archivo compatible: PDF, document, drawing o image. El tamaño máximo es de 10 MB.
            </p>
            <input type="file" id="estado-cuenta" name="estado-cuenta" required accept=".pdf,.doc,.docx,.jpg,.jpeg,.png">



                <button type="button" id="prev-step-5">Atrás</button>
                <button type="submit" id="submit-form">Enviar</button>
            </div>

        </form>
    </div>

    <script>
        function extraerDatosDeCURP(curp) {
            const curpRegex = /^([A-Z]{4})(\d{2})(\d{2})(\d{2})([H,M])([A-Z]{2})([A-Z]{3})([0-9A-Z])\d$/;

            if (!curpRegex.test(curp)) {
                return null;
            }

            const match = curp.match(curpRegex);
            const year = parseInt(match[2], 10) + (parseInt(match[2], 10) > 22 ? 1900 : 2000);
            const month = parseInt(match[3], 10) - 1;
            const day = parseInt(match[4], 10);
            const gender = match[5] === "H" ? "masculino" : "femenino";
            const stateCode = match[6];

            const estados = {
                AS: "Aguascalientes",
                BC: "Baja California",
                BS: "Baja California Sur",
                CC: "Campeche",
                CL: "Coahuila",
                CM: "Colima",
                DF: "Ciudad de México",
                GT: "Guanajuato",
                GR: "Guerrero",
                MC: "Estado de México",
                MN: "Michoacán",
                NL: "Nuevo León",
                OC: "Oaxaca",
                PL: "Puebla",
                QT: "Querétaro",
                SL: "Sinaloa",
                VZ: "Veracruz",
                YN: "Yucatán",
                ZS: "Zacatecas",
            };

            return {
                fechaNacimiento: new Date(year, month, day),
                genero: gender,
                estado: estados[stateCode] || "Desconocido",
            };
        }

        document.getElementById("curp").addEventListener("blur", function () {
            const curpValue = this.value.trim().toUpperCase();
            const datos = extraerDatosDeCURP(curpValue);

            if (datos) {
                document.getElementById("fecha_nacimiento").value = datos.fechaNacimiento.toISOString().split("T")[0];
                document.getElementById("genero").value = datos.genero;
                document.getElementById("nacionalidad").value = datos.estado === "Nacido en el Extranjero" ? "otra" : "mexicana";
            } else {
                alert("La CURP ingresada no es válida.");
            }
        });
        document.getElementById('next-step').addEventListener('click', function () {
            const emailField = document.getElementById('email');
            if (emailField.value.trim() === "") {
                alert("Por favor, ingrese su correo electrónico antes de continuar.");
            } else {
                document.getElementById('step-1').classList.add('hidden');
                document.getElementById('step-2').classList.remove('hidden');
            }
        });
        const bancoSelect = document.getElementById('banco');
        const bbvaSection = document.getElementById('bbva-section');
        const otroSection = document.getElementById('otro-section');

        bancoSelect.addEventListener('change', function () {
            const selectedValue = bancoSelect.value;

            bbvaSection.classList.add('hidden');
            otroSection.classList.add('hidden');

            if (selectedValue === 'bbva') {
                bbvaSection.classList.remove('hidden');
            } else if (selectedValue !== '') {
                otroSection.classList.remove('hidden');
            }
        });

        document.getElementById('prev-step').addEventListener('click', function () {
            document.getElementById('step-2').classList.add('hidden');
            document.getElementById('step-1').classList.remove('hidden');
        });
        document.getElementById('next-step-2').addEventListener('click', function () {
            document.getElementById('step-2').classList.add('hidden');
            document.getElementById('step-3').classList.remove('hidden');
        });

        document.getElementById('prev-step-3').addEventListener('click', function () {
            document.getElementById('step-3').classList.add('hidden');
            document.getElementById('step-2').classList.remove('hidden');
        });

        document.getElementById('next-step-3').addEventListener('click', function () {
            document.getElementById('step-3').classList.add('hidden');
            document.getElementById('step-4').classList.remove('hidden');
        });

        document.getElementById('prev-step-4').addEventListener('click', function () {
            document.getElementById('step-4').classList.add('hidden');
            document.getElementById('step-3').classList.remove('hidden');
        });
        document.getElementById('next-step-4').addEventListener('click', function () {
            document.getElementById('step-4').classList.add('hidden');
            document.getElementById('step-5').classList.remove('hidden');
        });

        document.getElementById('prev-step-5').addEventListener('click', function () {
            document.getElementById('step-5').classList.add('hidden');
            document.getElementById('step-4').classList.remove('hidden');
        });
        
        document.querySelectorAll('input[type="file"]').forEach((input) => {
            input.addEventListener('change', function () {
                const file = this.files[0];
                if (file && file.size > 10 * 1024 * 1024) { // 10 MB
                    alert("El archivo excede el tamaño máximo permitido de 10 MB.");
                    this.value = ""; 
                }
            });
        });


        // botón "Enviar"
        document.getElementById('formulario').addEventListener('submit', async function (e) {
            e.preventDefault(); 

            const form = document.getElementById('formulario');
            const formData = new FormData(form);

            try {
                const response = await fetch('http://127.0.0.1:5000/registrar', { 
                    method: 'POST',
                    body: formData,
                 });

                const result = await response.json();
                alert(result.message);

                if (result.message === 'Registro exitoso') {
                    form.reset(); 
                }
            } catch (error) {
                alert('Error al enviar los datos: ' + error.message);
            }
        });
    </script>
</body>
</html>

